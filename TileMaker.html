<html>

<head>
    <script>
        var b = [
            {Name: "Acid", short: "AC", imageId: "BAC"}, 
    ]
    var b_other = [
            {Name: "Black", short: "BL", imageId: "BBL"}, 
            {Name: "Cobbles", short: "CB", imageId: "BCB"}, 
            {Name: "Grass", short: "GR", imageId: "BGR"}, 
            {Name: "Lava", short: "LA", imageId: "BLA"}, 
            {Name: "Light Gray", short: "LG", imageId: "BLG"}, 
            {Name: "Sand", short: "SA", imageId: "BSA"}, 
            {Name: "Tiles", short: "TL", imageId: "BTL"}, 
            {Name: "Water", short: "WA", imageId: "BWA"}, 
            {Name: "Wood Dark", short: "WD", imageId: "BWD"}, 
            {Name: "Wood Light", short: "WL", imageId: "BWL"}, 
        ]
        var config = [
            {
                n: "E-01",
                t: [
                    {
                        n: "1",
                        tiles: ["E1T1"],
                        lines: ["E1L1"]
                    },
                    {
                        n: "2",
                        tiles: ["E1T2"],
                        lines: ["E1L1", "E1L2"]
                    },
                    {
                        n: "3",
                        tiles: ["E1T1", "E1T2"],
                        lines: ["E1L2"]
                    },
                    {
                        n: "4",
                        tiles: ["E1T4"],
                        lines: ["E1L2"]
                    },
                    {
                        n: "5",
                        tiles: ["E1T1", "E1T4"],
                        lines: ["E1L1", "E1L2"]
                    },
                    {
                        n: "6",
                        tiles: ["E1T4"],
                        lines: ["E1L2"]
                    },
                ]
            },
            {
                n: "E-02",
                t: [
                    {
                        n: "1",
                        tiles: ["E2T1"],
                        lines: ["E2L1"]
                    },
                    {
                        n: "2",
                        tiles: ["E2T2"],
                        lines: ["E2L1", "E2L2"]
                    },
                    {
                        n: "3",
                        tiles: ["E2T1", "E2T2"],
                        lines: ["E2L1", "E2L2"]
                    },
                    {
                        n: "4",
                        tiles: ["E2T4"],
                        lines: ["E2L2"]
                    },
                    {
                        n: "5",
                        tiles: ["E2T1", "E2T4"],
                        lines: ["E2L1", "E2L2"]
                    },
                    {
                        n: "6",
                        tiles: ["E2T4"],
                        lines: ["E2L2"]
                    },
                ]
            },
            {
                n: "S-01",
                t: [
                {
                        n: "1",
                        tiles: ["S1T1"],
                        lines: ["S1L1"]
                    },
                    {
                        n: "2",
                        tiles: ["S1T2"],
                        lines: ["S1L1", "S1L2"]
                    },
                    {
                        n: "3",
                        tiles: ["S1T1", "S1T2"],
                        lines: ["S1L2"]
                    },
                    {
                        n: "4",
                        tiles: ["S1T4"],
                        lines: ["S1L2", "S1L4"]
                    },
                    {
                        n: "5",
                        tiles: ["S1T1", "S1T4"],
                        lines: ["S1L1", "S1L2", "S1L3"]
                    },
                    {
                        n: "6",
                        tiles: ["S1T4"],
                        lines: ["S1L2", "S1L3"]
                    },
                    {
                        n: "7",
                        tiles: ["S1T1", "S1T2", "S1T4"],
                        lines: ["S1L4"]
                    },
                    {
                        n: "8",
                        tiles: ["S1T8"],
                        lines: ["S1L4", "S1L3"]
                    },
                    {
                        n: "9",
                        tiles: ["S1T1", "S1T8"],
                        lines: ["S1L1", "S1L3", "S1L4"]
                    },
                    {
                        n: "10",
                        tiles: ["S1T2", "S1T8"],
                        lines: ["S1L1", "S1L2", "S1L3", "S1L4"]
                    },
                    {
                        n: "11",
                        tiles: ["S1T1", "S1T2", "S1T8"],
                        lines: ["S1L2", "S1L3", "S1L4"]
                    },
                    {
                        n: "12",
                        tiles: ["S1T4", "S1T8"],
                        lines: ["S1L2", "S1L4"]
                    },
                    {
                        n: "13",
                        tiles: ["S1T1", "S1T4", "S1T8"],
                        lines: ["S1L1", "S1L2", "S1L4"]
                    },
                    {
                        n: "14",
                        tiles: ["S1T4", "S1T8"],
                        lines: ["S1L2", "S1L4"]
                    },
                    {
                        n: "15",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T8"],
                        lines: ["S1L4"]
                    },
                    {
                        n: "16",
                        tiles: ["S1T16"],
                        lines: ["S1L4", "S1L5"]
                    },
                    {
                        n: "17",
                        tiles: ["S1T1", "S1T16"],
                        lines: ["S1L1", "S1L4", "S1L5"]
                    },
                    {
                        n: "18",
                        tiles: ["S1T2", "S1T16"],
                        lines: ["S1L1", "S1L2", "S1L4", "S1L5"],
                    },
                    {
                        n: "19",
                        tiles: ["S1T1", "S1T2", "S1T16"],
                        lines: ["S1L2", "S1L4", "S1L5"]
                    },
                    {
                        n: "20",
                        tiles: ["S1T4", "S1T16"],
                        lines: ["S1L2", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "21",
                        tiles: ["S1T1", "S1T4", "S1T16"],
                        lines: ["S1L1", "S1L2", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "22",
                        tiles: ["S1T4", "S1T16"],
                        lines: ["S1L2", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "23",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T16"],
                        lines: ["S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "24",
                        tiles: ["S1T8", "S1T16"],
                        lines: ["S1L3", "S1L5"]
                    },
                    {
                        n: "25",
                        tiles: ["S1T1", "S1T8", "S1T16"],
                        lines: ["S1L1", "S1L3", "S1L5"]
                    },
                    {
                        n: "26",
                        tiles: ["S1T2", "S1T8", "S1T16"],
                        lines: ["S1L1", "S1L2", "S1L3", "S1L5"]
                    },
                    {
                        n: "27",
                        tiles: ["S1T1", "S1T2", "S1T8", "S1T16"],
                        lines: ["S1L2", "S1L3", "S1L5"],
                    },
                    {
                        n: "28",
                        tiles: ["S1T4", "S1T8", "S1T16"],
                        lines: ["S1L2", "S1L5"]
                    },
                    {
                        n: "29",
                        tiles: ["S1T1", "S1T4", "S1T8", "S1T16"],
                        lines: ["S1L1", "S1L2", "S1L5"]
                    },
                    {
                        n: "30",
                        tiles: ["S1T4", "S1T8", "S1T16"],
                        lines: ["S1L2", "S1L5"]
                    },
                    {
                        n: "31",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T8", "S1T16"],
                        lines: ["S1L5"],
                    },
                    {
                        n: "32",
                        tiles: ["S1T32"],
                        lines: ["S1L5"]
                    },
                    {
                        n: "33",
                        tiles: ["S1T1", "S1T32"],
                        lines: ["S1L1", "S1L5"]
                    },
                    {
                        n: "34",
                        tiles: ["S1T2", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L5"]
                    },
                    {
                        n: "35",
                        tiles: ["S1T1", "S1T2", "S1T32"],
                        lines: ["S1L2", "S1L5"]
                    },
                    {
                        n: "36",
                        tiles: ["S1T4", "S1T32"],
                        lines: ["S1L2", "S1L3", "S1L5"]
                    },
                    {
                        n: "37",
                        tiles: ["S1T1", "S1T4", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L4", "S1L5"]
                    },
                    {
                        n: "38",
                        tiles: ["S1T4", "S1T32"],
                        lines: ["S1L2", "S1L3", "S1L5"]
                    },
                    {
                        n: "39",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T32"],
                        lines: ["S1L3", "S1L5"]
                    },
                    {
                        n: "40",
                        tiles: ["S1T8", "S1T32"],
                        lines: ["S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "41",
                        tiles: ["S1T1", "S1T8", "S1T32"],
                        lines: ["S1L1", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "42",
                        tiles: ["S1T2", "S1T8", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "43",
                        tiles: ["S1T1", "S1T2", "S1T8", "S1T32"],
                        lines: ["S1L2", "S1L3", "S1L4", "S1L5"]
                    },
                    {
                        n: "44",
                        tiles: ["S1T4", "S1T8", "S1T32"],
                        lines: ["S1L2", "S1L4", "S1L5"]
                    },
                    {
                        n: "45",
                        tiles: ["S1T1", "S1T4", "S1T8", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L4", "S1L5"]
                    },
                    {
                        n: "46",
                        tiles: ["S1T4", "S1T8", "S1T32"],
                        lines: ["S1L2", "S1L4", "S1L5"]
                    },
                    {
                        n: "47",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T8", "S1T32"],
                        lines: ["S1L4", "S1L5"]
                    },
                    {
                        n: "48",
                        tiles: ["S1T16", "S1T32"],
                        lines: ["S1L4"]
                    },
                    {
                        n: "49",
                        tiles: ["S1T1", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L4"]
                    },
                    {
                        n: "50",
                        tiles: ["S1T2", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L4"],
                    },
                    {
                        n: "51",
                        tiles: ["S1T1", "S1T2", "S1T16", "S1T32"],
                        lines: ["S1L2", "S1L4"]
                    },
                    {
                        n: "52",
                        tiles: ["S1T4", "S1T16", "S1T32"],
                        lines: ["S1L2", "S1L3", "S1L4"]
                    },
                    {
                        n: "53",
                        tiles: ["S1T1", "S1T4", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L3", "S1L4"]
                    },
                    {
                        n: "54",
                        tiles: ["S1T4", "S1T16", "S1T32"],
                        lines: ["S1L2", "S1L3", "S1L4"]
                    },
                    {
                        n: "55",
                        tiles: ["S1T1", "S1T2", "S1T4", "S1T16", "S1T32"],
                        lines: ["S1L3", "S1L3"]
                    },
                    {
                        n: "56",
                        tiles: ["S1T8", "S1T16", "S1T32"],
                        lines: ["S1L3"]
                    },
                    {
                        n: "57",
                        tiles: ["S1T1", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L3"]
                    },
                    {
                        n: "58",
                        tiles: ["S1T2", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L2", "S1L3"]
                    },
                    {
                        n: "59",
                        tiles: ["S1T1", "S1T2", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L2", "S1L3"],
                    },
                    {
                        n: "60",
                        tiles: ["S1T4", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L2"]
                    },
                    {
                        n: "61",
                        tiles: ["S1T1", "S1T4", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L1", "S1L2"]
                    },
                    {
                        n: "62",
                        tiles: ["S1T4", "S1T8", "S1T16", "S1T32"],
                        lines: ["S1L2"]
                    },
                ]
            },
            {
                n: "S-02",
                t: [
                {
                        n: "1",
                        tiles: ["S2T1"],
                        lines: ["S2L1"]
                    },
                    {
                        n: "2",
                        tiles: ["S2T2"],
                        lines: ["S2L1", "S2L2"]
                    },
                    {
                        n: "3",
                        tiles: ["S2T1", "S2T2"],
                        lines: ["S2L2"]
                    },
                    {
                        n: "4",
                        tiles: ["S2T4"],
                        lines: ["S2L2", "S2L3"]
                    },
                    {
                        n: "5",
                        tiles: ["S2T1", "S2T4"],
                        lines: ["S2L1", "S2L2", "S2L3"]
                    },
                    {
                        n: "6",
                        tiles: ["S2T4"],
                        lines: ["S2L2", "S2L3"]
                    },
                    {
                        n: "7",
                        tiles: ["S2T1", "S2T2", "S2T4"],
                        lines: ["S2L3"]
                    },
                    {
                        n: "8",
                        tiles: ["S2T8"],
                        lines: ["S2L3", "S2L4"]
                    },
                    {
                        n: "9",
                        tiles: ["S2T1", "S2T8"],
                        lines: ["S2L1", "S2L3", "S2L4"]
                    },
                    {
                        n: "10",
                        tiles: ["S2T2", "S2T8"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L4"]
                    },
                    {
                        n: "11",
                        tiles: ["S2T1", "S2T2", "S2T8"],
                        lines: ["S2L2", "S2L3", "S2L4"]
                    },
                    {
                        n: "12",
                        tiles: ["S2T4", "S2T8"],
                        lines: ["S2L2", "S2L4"]
                    },
                    {
                        n: "13",
                        tiles: ["S2T1", "S2T4", "S2T8"],
                        lines: ["S2L1", "S2L2", "S2L4"]
                    },
                    {
                        n: "14",
                        tiles: ["S2T4", "S2T8"],
                        lines: ["S2L2", "S2L4"]
                    },
                    {
                        n: "15",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T8"],
                        lines: ["S2L4"]
                    },
                    {
                        n: "16",
                        tiles: ["S2T16"],
                        lines: ["S2L4", "S2L5"]
                    },
                    {
                        n: "17",
                        tiles: ["S2T1", "S2T16"],
                        lines: ["S2L1", "S2L4", "S2L5"]
                    },
                    {
                        n: "18",
                        tiles: ["S2T2", "S2T16"],
                        lines: ["S2L1", "S2L2", "S2L4", "S2L5"],
                    },
                    {
                        n: "19",
                        tiles: ["S2T1", "S2T2", "S2T16"],
                        lines: ["S2L2", "S2L4", "S2L5"]
                    },
                    {
                        n: "20",
                        tiles: ["S2T4", "S2T16"],
                        lines: ["S2L2", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "21",
                        tiles: ["S2T1", "S2T4", "S2T16"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "22",
                        tiles: ["S2T4", "S2T16"],
                        lines: ["S2L2", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "23",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T16"],
                        lines: ["S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "24",
                        tiles: ["S2T8", "S2T16"],
                        lines: ["S2L3", "S2L5"]
                    },
                    {
                        n: "25",
                        tiles: ["S2T1", "S2T8", "S2T16"],
                        lines: ["S2L1", "S2L3", "S2L5"]
                    },
                    {
                        n: "26",
                        tiles: ["S2T2", "S2T8", "S2T16"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L5"]
                    },
                    {
                        n: "27",
                        tiles: ["S2T1", "S2T2", "S2T8", "S2T16"],
                        lines: ["S2L2", "S2L3", "S2L5"],
                    },
                    {
                        n: "28",
                        tiles: ["S2T4", "S2T8", "S2T16"],
                        lines: ["S2L2", "S2L5"]
                    },
                    {
                        n: "29",
                        tiles: ["S2T1", "S2T4", "S2T8", "S2T16"],
                        lines: ["S2L1", "S2L2", "S2L5"]
                    },
                    {
                        n: "30",
                        tiles: ["S2T4", "S2T8", "S2T16"],
                        lines: ["S2L2", "S2L5"]
                    },
                    {
                        n: "31",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T8", "S2T16"],
                        lines: ["S2L5"],
                    },
                    {
                        n: "32",
                        tiles: ["S2T32"],
                        lines: ["S2L5"]
                    },
                    {
                        n: "33",
                        tiles: ["S2T1", "S2T32"],
                        lines: ["S2L1", "S2L5"]
                    },
                    {
                        n: "34",
                        tiles: ["S2T2", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L5"]
                    },
                    {
                        n: "35",
                        tiles: ["S2T1", "S2T2", "S2T32"],
                        lines: ["S2L2", "S2L5"]
                    },
                    {
                        n: "36",
                        tiles: ["S2T4", "S2T32"],
                        lines: ["S2L2", "S2L3", "S2L5"]
                    },
                    {
                        n: "37",
                        tiles: ["S2T1", "S2T4", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L5"]
                    },
                    {
                        n: "38",
                        tiles: ["S2T4", "S2T32"],
                        lines: ["S2L2", "S2L3", "S2L5"]
                    },
                    {
                        n: "39",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T32"],
                        lines: ["S2L3", "S2L5"]
                    },
                    {
                        n: "40",
                        tiles: ["S2T8", "S2T32"],
                        lines: ["S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "41",
                        tiles: ["S2T1", "S2T8", "S2T32"],
                        lines: ["S2L1", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "42",
                        tiles: ["S2T2", "S2T8", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "43",
                        tiles: ["S2T1", "S2T2", "S2T8", "S2T32"],
                        lines: ["S2L2", "S2L3", "S2L4", "S2L5"]
                    },
                    {
                        n: "44",
                        tiles: ["S2T4", "S2T8", "S2T32"],
                        lines: ["S2L2", "S2L4", "S2L5"]
                    },
                    {
                        n: "45",
                        tiles: ["S2T1", "S2T4", "S2T8", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L4", "S2L5"]
                    },
                    {
                        n: "46",
                        tiles: ["S2T4", "S2T8", "S2T32"],
                        lines: ["S2L2", "S2L4", "S2L5"]
                    },
                    {
                        n: "47",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T8", "S2T32"],
                        lines: ["S2L4", "S2L5"]
                    },
                    {
                        n: "48",
                        tiles: ["S2T16", "S2T32"],
                        lines: ["S2L4"]
                    },
                    {
                        n: "49",
                        tiles: ["S2T1", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L4"]
                    },
                    {
                        n: "50",
                        tiles: ["S2T2", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L4"],
                    },
                    {
                        n: "51",
                        tiles: ["S2T1", "S2T2", "S2T16", "S2T32"],
                        lines: ["S2L2", "S2L4"]
                    },
                    {
                        n: "52",
                        tiles: ["S2T4", "S2T16", "S2T32"],
                        lines: ["S2L2", "S2L3", "S2L4"]
                    },
                    {
                        n: "53",
                        tiles: ["S2T1", "S2T4", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L3", "S2L4"]
                    },
                    {
                        n: "54",
                        tiles: ["S2T4", "S2T16", "S2T32"],
                        lines: ["S2L2", "S2L3", "S2L4"]
                    },
                    {
                        n: "55",
                        tiles: ["S2T1", "S2T2", "S2T4", "S2T16", "S2T32"],
                        lines: ["S2L3", "S2L4"]
                    },
                    {
                        n: "56",
                        tiles: ["S2T8", "S2T16", "S2T32"],
                        lines: ["S2L3"]
                    },
                    {
                        n: "57",
                        tiles: ["S2T1", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L3"]
                    },
                    {
                        n: "58",
                        tiles: ["S2T2", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L2", "S2L3"]
                    },
                    {
                        n: "59",
                        tiles: ["S2T1", "S2T2", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L2", "S2L3"],
                    },
                    {
                        n: "60",
                        tiles: ["S2T4", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L2"]
                    },
                    {
                        n: "61",
                        tiles: ["S2T1", "S2T4", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L1", "S2L2"]
                    },
                    {
                        n: "62",
                        tiles: ["S2T4", "S2T8", "S2T16", "S2T32"],
                        lines: ["S2L2"]
                    },
                ]
            },
            {
                n: "C-01",
                t: [
                {
                        n: "1",
                        tiles: ["C1T1"],
                        lines: ["C1L1"]
                    },
                    {
                        n: "2",
                        tiles: ["C1T2"],
                        lines: ["C1L1", "C1L2"]
                    },
                    {
                        n: "3",
                        tiles: ["C1T1", "C1T2"],
                        lines: ["C1L2"]
                    },
                    {
                        n: "4",
                        tiles: ["C1T4"],
                        lines: ["C1L2", "C1L4"]
                    },
                    {
                        n: "5",
                        tiles: ["C1T1", "C1T4"],
                        lines: ["C1L1", "C1L2", "C1L3"]
                    },
                    {
                        n: "6",
                        tiles: ["C1T4"],
                        lines: ["C1L2", "C1L3"]
                    },
                    {
                        n: "7",
                        tiles: ["C1T1", "C1T2", "C1T4"],
                        lines: ["C1L4"]
                    },
                    {
                        n: "8",
                        tiles: ["C1T8"],
                        lines: ["C1L4", "C1L3"]
                    },
                    {
                        n: "9",
                        tiles: ["C1T1", "C1T8"],
                        lines: ["C1L1", "C1L3", "C1L4"]
                    },
                    {
                        n: "10",
                        tiles: ["C1T2", "C1T8"],
                        lines: ["C1L1", "C1L2", "C1L3", "C1L4"]
                    },
                    {
                        n: "11",
                        tiles: ["C1T1", "C1T2", "C1T8"],
                        lines: ["C1L2", "C1L3", "C1L4"]
                    },
                    {
                        n: "12",
                        tiles: ["C1T4", "C1T8"],
                        lines: ["C1L2", "C1L4"]
                    },
                    {
                        n: "13",
                        tiles: ["C1T1", "C1T4", "C1T8"],
                        lines: ["C1L1", "C1L2", "C1L4"]
                    },
                    {
                        n: "14",
                        tiles: ["C1T4", "C1T8"],
                        lines: ["C1L2", "C1L4"]
                    },
                    {
                        n: "15",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T8"],
                        lines: ["C1L4"]
                    },
                    {
                        n: "16",
                        tiles: ["C1T16"],
                        lines: ["C1L4", "C1L5"]
                    },
                    {
                        n: "17",
                        tiles: ["C1T1", "C1T16"],
                        lines: ["C1L1", "C1L4", "C1L5"]
                    },
                    {
                        n: "18",
                        tiles: ["C1T2", "C1T16"],
                        lines: ["C1L1", "C1L2", "C1L4", "C1L5"],
                    },
                    {
                        n: "19",
                        tiles: ["C1T1", "C1T2", "C1T16"],
                        lines: ["C1L2", "C1L4", "C1L5"]
                    },
                    {
                        n: "20",
                        tiles: ["C1T4", "C1T16"],
                        lines: ["C1L2", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "21",
                        tiles: ["C1T1", "C1T4", "C1T16"],
                        lines: ["C1L1", "C1L2", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "22",
                        tiles: ["C1T4", "C1T16"],
                        lines: ["C1L2", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "23",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T16"],
                        lines: ["C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "24",
                        tiles: ["C1T8", "C1T16"],
                        lines: ["C1L3", "C1L5"]
                    },
                    {
                        n: "25",
                        tiles: ["C1T1", "C1T8", "C1T16"],
                        lines: ["C1L1", "C1L3", "C1L5"]
                    },
                    {
                        n: "26",
                        tiles: ["C1T2", "C1T8", "C1T16"],
                        lines: ["C1L1", "C1L2", "C1L3", "C1L5"]
                    },
                    {
                        n: "27",
                        tiles: ["C1T1", "C1T2", "C1T8", "C1T16"],
                        lines: ["C1L2", "C1L3", "C1L5"],
                    },
                    {
                        n: "28",
                        tiles: ["C1T4", "C1T8", "C1T16"],
                        lines: ["C1L2", "C1L5"]
                    },
                    {
                        n: "29",
                        tiles: ["C1T1", "C1T4", "C1T8", "C1T16"],
                        lines: ["C1L1", "C1L2", "C1L5"]
                    },
                    {
                        n: "30",
                        tiles: ["C1T4", "C1T8", "C1T16"],
                        lines: ["C1L2", "C1L5"]
                    },
                    {
                        n: "31",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T8", "C1T16"],
                        lines: ["C1L5"],
                    },
                    {
                        n: "32",
                        tiles: ["C1T32"],
                        lines: ["C1L5"]
                    },
                    {
                        n: "33",
                        tiles: ["C1T1", "C1T32"],
                        lines: ["C1L1", "C1L5"]
                    },
                    {
                        n: "34",
                        tiles: ["C1T2", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L5"]
                    },
                    {
                        n: "35",
                        tiles: ["C1T1", "C1T2", "C1T32"],
                        lines: ["C1L2", "C1L5"]
                    },
                    {
                        n: "36",
                        tiles: ["C1T4", "C1T32"],
                        lines: ["C1L2", "C1L3", "C1L5"]
                    },
                    {
                        n: "37",
                        tiles: ["C1T1", "C1T4", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L4", "C1L5"]
                    },
                    {
                        n: "38",
                        tiles: ["C1T4", "C1T32"],
                        lines: ["C1L2", "C1L3", "C1L5"]
                    },
                    {
                        n: "39",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T32"],
                        lines: ["C1L3", "C1L5"]
                    },
                    {
                        n: "40",
                        tiles: ["C1T8", "C1T32"],
                        lines: ["C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "41",
                        tiles: ["C1T1", "C1T8", "C1T32"],
                        lines: ["C1L1", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "42",
                        tiles: ["C1T2", "C1T8", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "43",
                        tiles: ["C1T1", "C1T2", "C1T8", "C1T32"],
                        lines: ["C1L2", "C1L3", "C1L4", "C1L5"]
                    },
                    {
                        n: "44",
                        tiles: ["C1T4", "C1T8", "C1T32"],
                        lines: ["C1L2", "C1L4", "C1L5"]
                    },
                    {
                        n: "45",
                        tiles: ["C1T1", "C1T4", "C1T8", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L4", "C1L5"]
                    },
                    {
                        n: "46",
                        tiles: ["C1T4", "C1T8", "C1T32"],
                        lines: ["C1L2", "C1L4", "C1L5"]
                    },
                    {
                        n: "47",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T8", "C1T32"],
                        lines: ["C1L4", "C1L5"]
                    },
                    {
                        n: "48",
                        tiles: ["C1T16", "C1T32"],
                        lines: ["C1L4"]
                    },
                    {
                        n: "49",
                        tiles: ["C1T1", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L4"]
                    },
                    {
                        n: "50",
                        tiles: ["C1T2", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L4"],
                    },
                    {
                        n: "51",
                        tiles: ["C1T1", "C1T2", "C1T16", "C1T32"],
                        lines: ["C1L2", "C1L4"]
                    },
                    {
                        n: "52",
                        tiles: ["C1T4", "C1T16", "C1T32"],
                        lines: ["C1L2", "C1L3", "C1L4"]
                    },
                    {
                        n: "53",
                        tiles: ["C1T1", "C1T4", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L3", "C1L4"]
                    },
                    {
                        n: "54",
                        tiles: ["C1T4", "C1T16", "C1T32"],
                        lines: ["C1L2", "C1L3", "C1L4"]
                    },
                    {
                        n: "55",
                        tiles: ["C1T1", "C1T2", "C1T4", "C1T16", "C1T32"],
                        lines: ["C1L3", "C1L3"]
                    },
                    {
                        n: "56",
                        tiles: ["C1T8", "C1T16", "C1T32"],
                        lines: ["C1L3"]
                    },
                    {
                        n: "57",
                        tiles: ["C1T1", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L3"]
                    },
                    {
                        n: "58",
                        tiles: ["C1T2", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L2", "C1L3"]
                    },
                    {
                        n: "59",
                        tiles: ["C1T1", "C1T2", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L2", "C1L3"],
                    },
                    {
                        n: "60",
                        tiles: ["C1T4", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L2"]
                    },
                    {
                        n: "61",
                        tiles: ["C1T1", "C1T4", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L1", "C1L2"]
                    },
                    {
                        n: "62",
                        tiles: ["C1T4", "C1T8", "C1T16", "C1T32"],
                        lines: ["C1L2"]
                    },
                ]
            },
            {
                n: "C-02",
                t: [
                {
                        n: "1",
                        tiles: ["C2T1"],
                        lines: ["C2L1"]
                    },
                    {
                        n: "2",
                        tiles: ["C2T2"],
                        lines: ["C2L1", "C2L2"]
                    },
                    {
                        n: "3",
                        tiles: ["C2T1", "C2T2"],
                        lines: ["C2L2"]
                    },
                    {
                        n: "4",
                        tiles: ["C2T4"],
                        lines: ["C2L2", "C2L3"]
                    },
                    {
                        n: "5",
                        tiles: ["C2T1", "C2T4"],
                        lines: ["C2L1", "C2L2", "C2L3"]
                    },
                    {
                        n: "6",
                        tiles: ["C2T4"],
                        lines: ["C2L2", "C2L3"]
                    },
                    {
                        n: "7",
                        tiles: ["C2T1", "C2T2", "C2T4"],
                        lines: ["C2L3"]
                    },
                    {
                        n: "8",
                        tiles: ["C2T8"],
                        lines: ["C2L3", "C2L4"]
                    },
                    {
                        n: "9",
                        tiles: ["C2T1", "C2T8"],
                        lines: ["C2L1", "C2L3", "C2L4"]
                    },
                    {
                        n: "10",
                        tiles: ["C2T2", "C2T8"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L4"]
                    },
                    {
                        n: "11",
                        tiles: ["C2T1", "C2T2", "C2T8"],
                        lines: ["C2L2", "C2L3", "C2L4"]
                    },
                    {
                        n: "12",
                        tiles: ["C2T4", "C2T8"],
                        lines: ["C2L2", "C2L4"]
                    },
                    {
                        n: "13",
                        tiles: ["C2T1", "C2T4", "C2T8"],
                        lines: ["C2L1", "C2L2", "C2L4"]
                    },
                    {
                        n: "14",
                        tiles: ["C2T4", "C2T8"],
                        lines: ["C2L2", "C2L4"]
                    },
                    {
                        n: "15",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T8"],
                        lines: ["C2L4"]
                    },
                    {
                        n: "16",
                        tiles: ["C2T16"],
                        lines: ["C2L4", "C2L5"]
                    },
                    {
                        n: "17",
                        tiles: ["C2T1", "C2T16"],
                        lines: ["C2L1", "C2L4", "C2L5"]
                    },
                    {
                        n: "18",
                        tiles: ["C2T2", "C2T16"],
                        lines: ["C2L1", "C2L2", "C2L4", "C2L5"],
                    },
                    {
                        n: "19",
                        tiles: ["C2T1", "C2T2", "C2T16"],
                        lines: ["C2L2", "C2L4", "C2L5"]
                    },
                    {
                        n: "20",
                        tiles: ["C2T4", "C2T16"],
                        lines: ["C2L2", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "21",
                        tiles: ["C2T1", "C2T4", "C2T16"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "22",
                        tiles: ["C2T4", "C2T16"],
                        lines: ["C2L2", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "23",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T16"],
                        lines: ["C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "24",
                        tiles: ["C2T8", "C2T16"],
                        lines: ["C2L3", "C2L5"]
                    },
                    {
                        n: "25",
                        tiles: ["C2T1", "C2T8", "C2T16"],
                        lines: ["C2L1", "C2L3", "C2L5"]
                    },
                    {
                        n: "26",
                        tiles: ["C2T2", "C2T8", "C2T16"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L5"]
                    },
                    {
                        n: "27",
                        tiles: ["C2T1", "C2T2", "C2T8", "C2T16"],
                        lines: ["C2L2", "C2L3", "C2L5"],
                    },
                    {
                        n: "28",
                        tiles: ["C2T4", "C2T8", "C2T16"],
                        lines: ["C2L2", "C2L5"]
                    },
                    {
                        n: "29",
                        tiles: ["C2T1", "C2T4", "C2T8", "C2T16"],
                        lines: ["C2L1", "C2L2", "C2L5"]
                    },
                    {
                        n: "30",
                        tiles: ["C2T4", "C2T8", "C2T16"],
                        lines: ["C2L2", "C2L5"]
                    },
                    {
                        n: "31",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T8", "C2T16"],
                        lines: ["C2L5"],
                    },
                    {
                        n: "32",
                        tiles: ["C2T32"],
                        lines: ["C2L5"]
                    },
                    {
                        n: "33",
                        tiles: ["C2T1", "C2T32"],
                        lines: ["C2L1", "C2L5"]
                    },
                    {
                        n: "34",
                        tiles: ["C2T2", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L5"]
                    },
                    {
                        n: "35",
                        tiles: ["C2T1", "C2T2", "C2T32"],
                        lines: ["C2L2", "C2L5"]
                    },
                    {
                        n: "36",
                        tiles: ["C2T4", "C2T32"],
                        lines: ["C2L2", "C2L3", "C2L5"]
                    },
                    {
                        n: "37",
                        tiles: ["C2T1", "C2T4", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L5"]
                    },
                    {
                        n: "38",
                        tiles: ["C2T4", "C2T32"],
                        lines: ["C2L2", "C2L3", "C2L5"]
                    },
                    {
                        n: "39",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T32"],
                        lines: ["C2L3", "C2L5"]
                    },
                    {
                        n: "40",
                        tiles: ["C2T8", "C2T32"],
                        lines: ["C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "41",
                        tiles: ["C2T1", "C2T8", "C2T32"],
                        lines: ["C2L1", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "42",
                        tiles: ["C2T2", "C2T8", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "43",
                        tiles: ["C2T1", "C2T2", "C2T8", "C2T32"],
                        lines: ["C2L2", "C2L3", "C2L4", "C2L5"]
                    },
                    {
                        n: "44",
                        tiles: ["C2T4", "C2T8", "C2T32"],
                        lines: ["C2L2", "C2L4", "C2L5"]
                    },
                    {
                        n: "45",
                        tiles: ["C2T1", "C2T4", "C2T8", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L4", "C2L5"]
                    },
                    {
                        n: "46",
                        tiles: ["C2T4", "C2T8", "C2T32"],
                        lines: ["C2L2", "C2L4", "C2L5"]
                    },
                    {
                        n: "47",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T8", "C2T32"],
                        lines: ["C2L4", "C2L5"]
                    },
                    {
                        n: "48",
                        tiles: ["C2T16", "C2T32"],
                        lines: ["C2L4"]
                    },
                    {
                        n: "49",
                        tiles: ["C2T1", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L4"]
                    },
                    {
                        n: "50",
                        tiles: ["C2T2", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L4"],
                    },
                    {
                        n: "51",
                        tiles: ["C2T1", "C2T2", "C2T16", "C2T32"],
                        lines: ["C2L2", "C2L4"]
                    },
                    {
                        n: "52",
                        tiles: ["C2T4", "C2T16", "C2T32"],
                        lines: ["C2L2", "C2L3", "C2L4"]
                    },
                    {
                        n: "53",
                        tiles: ["C2T1", "C2T4", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L3", "C2L4"]
                    },
                    {
                        n: "54",
                        tiles: ["C2T4", "C2T16", "C2T32"],
                        lines: ["C2L2", "C2L3", "C2L4"]
                    },
                    {
                        n: "55",
                        tiles: ["C2T1", "C2T2", "C2T4", "C2T16", "C2T32"],
                        lines: ["C2L3", "C2L4"]
                    },
                    {
                        n: "56",
                        tiles: ["C2T8", "C2T16", "C2T32"],
                        lines: ["C2L3"]
                    },
                    {
                        n: "57",
                        tiles: ["C2T1", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L3"]
                    },
                    {
                        n: "58",
                        tiles: ["C2T2", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L2", "C2L3"]
                    },
                    {
                        n: "59",
                        tiles: ["C2T1", "C2T2", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L2", "C2L3"],
                    },
                    {
                        n: "60",
                        tiles: ["C2T4", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L2"]
                    },
                    {
                        n: "61",
                        tiles: ["C2T1", "C2T4", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L1", "C2L2"]
                    },
                    {
                        n: "62",
                        tiles: ["C2T4", "C2T8", "C2T16", "C2T32"],
                        lines: ["C2L2"]
                    },
                ]
            },
        ]

        function load() {
            let allTileSets = []
            for (let i = 0; i < config.length; i++) {
                allTileSets.push(createTileSetForAllBackgrounds(config[i].n, config[i].t, b));
            }
            let images = [];
            let json = [];
            for (let i = 0; i < allTileSets.length; i++) {
                for (let ii = 0; ii < allTileSets[i].length; ii++) {
                    for (let iii = 0; iii < allTileSets[i][ii].tileSet.length; iii++) {
                        for (let iiii = 0; iiii < allTileSets[i][ii].tileSet[iii].length; iiii++) {
                            let x = allTileSets[i][ii].tileSet[iii][iiii];
                            json.push({
                                id: x.id,
                                src: 'mine/' + x.id + '.png',
                                subset: 'floordark1',
                                br: (iiii == 3 ? true : false),
                            })
                            images.push(x);
                        }
                    }
                }
            }
            document.getElementById("output").value = JSON.stringify(json, null, ' ');
            //outputAllImages(images);
        }

        function createTileSetForAllBackgrounds(name, tiles, backgrounds) {
            let tileSets = [];
            for (let backgroundsI = 0; backgroundsI < backgrounds.length; backgroundsI++) {
                backgrounds[backgroundsI].image = document.getElementById(backgrounds[backgroundsI].imageId);
                tileSets[backgroundsI] = {
                    background: backgrounds[backgroundsI],
                    tileSet: createTileSet(backgrounds[backgroundsI], tiles, name)
                }
                let div = document.getElementById("div1");
                for (let i = 0; i < tileSets[backgroundsI].tileSet.length; i++) {
                    let c = document.createElement("div")
                    c.innerText = tileSets[backgroundsI].tileSet[i][0].id
                    div.appendChild(c);
                    for (let ii = 0; ii < tileSets[backgroundsI].tileSet[i].length; ii++) {
                        div.appendChild(tileSets[backgroundsI].tileSet[i][ii].image);
                    }
                    div.appendChild(document.createElement("br"))
                }
                div.appendChild(document.createElement("br"))
            }
            return tileSets;
        }

        function createTileSet(background, tileSetDef, name) {
            let tileSet = [];
            for (let i = 0; i < tileSetDef.length; i++) {
                let subSet = [];
                let idPrefix = background.short + "-" + name + "-" + tileSetDef[i].n + "-";
                let smallSubSet = createSmallSubSet(idPrefix, background.image, tileSetDef[i].tiles, tileSetDef[i]
                    .lines);
                //tileSet.push(createTilesFromSmallSubSet(smallSubSet, idPrefix))
                let tiles = [{
                        id: idPrefix + "A",
                        src: 'directory' + '/' + idPrefix + 'A' + '.png',
                        subset: idPrefix,
                        image: smallSubSet.canvasA,
                    },
                    {
                        id: idPrefix + "B",
                        src: 'directory' + '/' + idPrefix + 'B' + '.png',
                        subset: idPrefix,
                        image: smallSubSet.canvasB,
                    },
                    {
                        id: idPrefix + "C",
                        src: 'directory' + '/' + idPrefix + 'C' + '.png',
                        subset: idPrefix,
                        image: smallSubSet.canvasC,
                    },
                    {
                        id: idPrefix + "D",
                        src: 'directory' + '/' + idPrefix + 'D' + '.png',
                        subset: idPrefix,
                        image: smallSubSet.canvasD,
                    },
                ]
                tileSet.push(tiles);
            }
            return tileSet;
        }

        function createSmallSubSet(idPrefix, backgroundImage, tiles, lines) {
            let smallSubSet = {};
            smallSubSet.canvasA = createCanvas(140, 140, idPrefix + "A")
            smallSubSet.canvasB = createCanvas(140, 140, idPrefix + "B")
            smallSubSet.canvasC = createCanvas(140, 140, idPrefix + "C")
            smallSubSet.canvasD = createCanvas(140, 140, idPrefix + "D")
            smallSubSet.canvasTempB1 = createCanvas(140, 140, idPrefix + "TempB1")
            smallSubSet.canvasTempC1 = createCanvas(140, 140, idPrefix + "TempC1")
            smallSubSet.canvasTempC2 = createCanvas(140, 140, idPrefix + "TempC2")
            smallSubSet.canvasTempD1 = createCanvas(140, 140, idPrefix + "TempD1")
            smallSubSet.canvasTempD2 = createCanvas(140, 140, idPrefix + "TempD2")
            smallSubSet.canvasTempD3 = createCanvas(140, 140, idPrefix + "TempD3")

            smallSubSet.backgroundA = createCanvas(140, 140, "background" + idPrefix + "A")
            smallSubSet.backgroundB = createCanvas(140, 140, "background" + idPrefix + "B")
            smallSubSet.backgroundC = createCanvas(140, 140, "background" + idPrefix + "C")
            smallSubSet.backgroundD = createCanvas(140, 140, "background" + idPrefix + "D")

            smallSubSet.backgroundA = backgroundImage;
            drawRotated90(smallSubSet.backgroundD, smallSubSet.backgroundA)
            drawRotated90(smallSubSet.backgroundC, smallSubSet.backgroundD)
            drawRotated90(smallSubSet.backgroundB, smallSubSet.backgroundC)

            mergeTileImages(smallSubSet.canvasA, smallSubSet.backgroundA, tiles, lines);
            mergeTileImages(smallSubSet.canvasTempB1, smallSubSet.backgroundB, tiles, lines);
            mergeTileImages(smallSubSet.canvasTempC1, smallSubSet.backgroundC, tiles, lines);
            mergeTileImages(smallSubSet.canvasTempD1, smallSubSet.backgroundD, tiles, lines);

            drawRotated90(smallSubSet.canvasB, smallSubSet.canvasTempB1)
            drawRotated90(smallSubSet.canvasTempC2, smallSubSet.canvasTempC1)
            drawRotated90(smallSubSet.canvasC, smallSubSet.canvasTempC2)
            drawRotated90(smallSubSet.canvasTempD2, smallSubSet.canvasTempD1)
            drawRotated90(smallSubSet.canvasTempD3, smallSubSet.canvasTempD2)
            drawRotated90(smallSubSet.canvasD, smallSubSet.canvasTempD3)
            return smallSubSet;
        }

        function createTilesFromSmallSubSet(smallSubSet, idPrefix) {
            let tiles = [];
            tiles.push(createTileJson(idPrefix + "A" + "-1", "directory", idPrefix, smallSubSet.canvasA, 0, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "A" + "-2", "directory", idPrefix, smallSubSet.canvasA, 140, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "A" + "-3", "directory", idPrefix, smallSubSet.canvasA, 0, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "A" + "-4", "directory", idPrefix, smallSubSet.canvasA, 140, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "B" + "-1", "directory", idPrefix, smallSubSet.canvasB, 0, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "B" + "-2", "directory", idPrefix, smallSubSet.canvasB, 140, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "B" + "-3", "directory", idPrefix, smallSubSet.canvasB, 0, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "B" + "-4", "directory", idPrefix, smallSubSet.canvasB, 140, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "C" + "-1", "directory", idPrefix, smallSubSet.canvasC, 0, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "C" + "-2", "directory", idPrefix, smallSubSet.canvasC, 140, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "C" + "-3", "directory", idPrefix, smallSubSet.canvasC, 0, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "C" + "-4", "directory", idPrefix, smallSubSet.canvasC, 140, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "D" + "-1", "directory", idPrefix, smallSubSet.canvasD, 0, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "D" + "-2", "directory", idPrefix, smallSubSet.canvasD, 140, 0, 140, 140))
            tiles.push(createTileJson(idPrefix + "D" + "-3", "directory", idPrefix, smallSubSet.canvasD, 0, 140, 140, 140))
            tiles.push(createTileJson(idPrefix + "D" + "-4", "directory", idPrefix, smallSubSet.canvasD, 140, 140, 140, 140))
            return tiles;
        }

        function createTileJson(id, directory, subset, smallImage, x, y, w, h) {
            //{id: 'waterlily1-3-5', src: 'decorations/nature/waterlily1-3-5.png', subset: 'waterlily1-3', }
            return {
                id: id,
                src: directory + '/' + id + '.png',
                subset: subset,
                image: drawImageOnCanvas(createCanvas(280, 280, id), smallImage, x, y, w, h),
            }
        }

        function createCanvas(width, height, id) {
            var canvas = document.createElement("canvas");
            canvas.width = width;
            canvas.height = height;
            canvas.id = id;
            return canvas;
        }

        function drawImageOnCanvas(canvas, image, x, y, w, h) {
            var ctx = canvas.getContext("2d");
            ctx.drawImage(image, x, y, w, h);
            return canvas;
        }

        function mergeTileImages(canvas, background, tiles, lines) {
            let tc = createCanvas(140, 140, "tc")
            let tctx = tc.getContext("2d");
            for (let i = 0; i < tiles.length; i++) {
                tctx.drawImage(document.getElementById(tiles[i]), 0, 0, 140, 140);
            }
            let ctx = canvas.getContext("2d");
            ctx.drawImage(background, 0, 0, 140, 140);
            ctx.globalCompositeOperation = "xor";
            ctx.drawImage(tc, 0, 0, 140, 140);
            ctx.globalCompositeOperation = "source-over";
            for (let ii = 0; ii < lines.length; ii++) {
                ctx.drawImage(document.getElementById(lines[ii]), 0, 0, 140, 140);
            }
        }

        function drawRotated90(targetCanvas, sourceImage) {
            let ctxT = targetCanvas.getContext("2d");
            ctxT.translate(targetCanvas.width / 2, targetCanvas.height / 2);
            ctxT.rotate(Math.PI / 2);
            ctxT.drawImage(sourceImage, -(sourceImage.width / 2), -(sourceImage.height / 2), sourceImage.width,
                sourceImage.height);
        }

        function outputAllImages(images) {
            let image = images.pop();
            downloadCanvasAsImage(image.image, image.id);
            if (images.length > 0) {
                setTimeout(outputAllImages, 300, images);
            }
        }

        function downloadCanvasAsImage(canvas, name) {
            let downloadLink = document.createElement('a');
            downloadLink.setAttribute('download', name + '.png');
            canvas.toBlob(function (blob) {
                let url = URL.createObjectURL(blob);
                downloadLink.setAttribute('href', url);
                downloadLink.click();
            });
        }
    </script>
</head>

<body onload="load()">
    <div style="border: 1px solid black;">
        <div>
            <img id="BAC" src="working/BAC.png" width="140" height="140" />
            <img id="BBL" src="working/BBL.png" width="140" height="140" />
            <img id="BCB" src="working/BCB.png" width="140" height="140" />
            <img id="BGR" src="working/BGR.png" width="140" height="140" />
            <img id="BLA" src="working/BLA.png" width="140" height="140" />
            <img id="BLG" src="working/BLG.png" width="140" height="140" />
            <img id="BSA" src="working/BSA.png" width="140" height="140" />
            <img id="BTL" src="working/BTL.png" width="140" height="140" />
            <img id="BWA" src="working/BWA.png" width="140" height="140" />
            <img id="BWD" src="working/BWD.png" width="140" height="140" />
            <img id="BWL" src="working/BWL.png" width="140" height="140" />
        </div>
        <div>
            <img id="E1L1" src="working/E1L1.png" width="140" height="140" />
            <img id="E1L2" src="working/E1L2.png" width="140" height="140" />
        </div>
        <div>
            <img id="E1T1" src="working/E1T1.png" width="140" height="140" />
            <img id="E1T2" src="working/E1T2.png" width="140" height="140" />
            <img id="E1T4" src="working/E1T4.png" width="140" height="140" />
        </div>
        <hr/>
        <div>
            <img id="E2L1" src="working/E2L1.png" width="140" height="140" />
            <img id="E2L2" src="working/E2L2.png" width="140" height="140" />
        </div>
        <div>
            <img id="E2T1" src="working/E2T1.png" width="140" height="140" />
            <img id="E2T2" src="working/E2T2.png" width="140" height="140" />
            <img id="E2T4" src="working/E2T4.png" width="140" height="140" />
        </div>
        <hr/>
        <div>
            <img id="S1L1" src="working/S1L1.png" width="140" height="140" />
            <img id="S1L2" src="working/S1L2.png" width="140" height="140" />
            <img id="S1L3" src="working/S1L3.png" width="140" height="140" />
            <img id="S1L4" src="working/S1L4.png" width="140" height="140" />
            <img id="S1L5" src="working/S1L5.png" width="140" height="140" />
        </div>
        <div>
            <img id="S1T1" src="working/S1T1.png" width="140" height="140" />
            <img id="S1T2" src="working/S1T2.png" width="140" height="140" />
            <img id="S1T4" src="working/S1T4.png" width="140" height="140" />
            <img id="S1T8" src="working/S1T8.png" width="140" height="140" />
            <img id="S1T16" src="working/S1T16.png" width="140" height="140" />
            <img id="S1T32" src="working/S1T32.png" width="140" height="140" />
        </div>
        <hr/>
        <div>
            <img id="S2L1" src="working/S2L1.png" width="140" height="140" />
            <img id="S2L2" src="working/S2L2.png" width="140" height="140" />
            <img id="S2L3" src="working/S2L3.png" width="140" height="140" />
            <img id="S2L4" src="working/S2L4.png" width="140" height="140" />
            <img id="S2L5" src="working/S2L5.png" width="140" height="140" />
        </div>
        <div>
            <img id="S2T1" src="working/S2T1.png" width="140" height="140" />
            <img id="S2T2" src="working/S2T2.png" width="140" height="140" />
            <img id="S2T4" src="working/S2T4.png" width="140" height="140" />
            <img id="S2T8" src="working/S2T8.png" width="140" height="140" />
            <img id="S2T16" src="working/S2T16.png" width="140" height="140" />
            <img id="S2T32" src="working/S2T32.png" width="140" height="140" />
        </div>
        <hr/>
        <div>
            <img id="C1L1" src="working/C1L1.png" width="140" height="140" />
            <img id="C1L2" src="working/C1L2.png" width="140" height="140" />
            <img id="C1L3" src="working/C1L3.png" width="140" height="140" />
            <img id="C1L4" src="working/C1L4.png" width="140" height="140" />
            <img id="C1L5" src="working/C1L5.png" width="140" height="140" />
        </div>
        <div>
            <img id="C1T1" src="working/C1T1.png" width="140" height="140" />
            <img id="C1T2" src="working/C1T2.png" width="140" height="140" />
            <img id="C1T4" src="working/C1T4.png" width="140" height="140" />
            <img id="C1T8" src="working/C1T8.png" width="140" height="140" />
            <img id="C1T16" src="working/C1T16.png" width="140" height="140" />
            <img id="C1T32" src="working/C1T32.png" width="140" height="140" />
        </div>
        <hr/>
        <div>
            <img id="C2L1" src="working/C2L1.png" width="140" height="140" />
            <img id="C2L2" src="working/C2L2.png" width="140" height="140" />
            <img id="C2L3" src="working/C2L3.png" width="140" height="140" />
            <img id="C2L4" src="working/C2L4.png" width="140" height="140" />
            <img id="C2L5" src="working/C2L5.png" width="140" height="140" />
        </div>
        <div>
            <img id="C2T1" src="working/C2T1.png" width="140" height="140" />
            <img id="C2T2" src="working/C2T2.png" width="140" height="140" />
            <img id="C2T4" src="working/C2T4.png" width="140" height="140" />
            <img id="C2T8" src="working/C2T8.png" width="140" height="140" />
            <img id="C2T16" src="working/C2T16.png" width="140" height="140" />
            <img id="C2T32" src="working/C2T32.png" width="140" height="140" />
        </div>
        <hr/>
    </div>
    <div><textarea id="output"></textarea></div>
    <div id="div1"></div>
</body>
</html>